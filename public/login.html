<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/bolhas.css">
    <link rel="stylesheet" href="./css/login.css">
    <script src="./js/bolhas.js"></script>
    <title>Login</title>
</head>

<body>
    <header>
        <!-- Nav -->
        <div id="nav">
            <div id="esquerda">
                <a href="./index.html">
                    <div id="logo"></div>
                </a>
            </div>
            <div id="direita">
                <li><a href="index.html">
                        <p class="fonte1">Home</p>
                    </a></li>
                <li><a href="./sobre.html">
                        <p class="fonte1">Sobre</p>
                    </a></li>
                |
                <li><a href="./login.html">
                        <p class="fonte1">Login</p>
                    </a></li>
                <li><a href="./cadastro.html">
                        <p class="fonte1">Cadastro</p>
                    </a> </li>
            </div>
        </div>
    </header>

    <body>


        <!-- Conteúdo  -->
        <div id="conteudo">

            <section>

                <div id="container">
                    <div id="card">
                        <div id="carPergunta"><b class="fonte1">Ainda <b class="fonte2">não</b> possui uma conta?</b>
                        </div>
                        <div id="cardRegiste">
                            <p><b class="fonte1">Registre-se <b class="fonte2">já</b></b></p>
                            <button class="fonte1" onclick="redirecionarCadastro()">Cadastrar</button>
                        </div>
                    </div>
                    <div id="login">

                        <div id="headerLogin">
                            <h1>Acesse sua conta</h1>
                        </div>
                        <label>
                            <p>Email:</p>
                            <input type="text" id="iptEmail">
                        </label>
                        <label>
                            <p>Senha:</p>
                            <input type="text" id="iptSenha">
                        </label>
                        <div id="lembre">
                            <input type="checkbox">
                            Lembre de mim
                        </div>
                        <button onclick="entrar()">Entrar</button>
                    </div>
                </div>

            </section>
        </div>

        <!-- Footer -->
        <div id="footer">
            <p>ⓒ Luckas Lopes 2025 - Todos os Direitos Reservados</p>
        </div>

    </body>

    <script>

        function redirecionarCadastro() {

            window.location = 'cadastro.html';

        }

    </script>

</body>

</html>
<script>

    function redirecionarCadastro() {

        window.location = 'cadastro.html';

    }

    function entrar() {

        var email = iptEmail.value;
        var senha = iptSenha.value;

        console.log("FORM LOGIN: ", email);
        console.log("FORM SENHA: ", senha);

        fetch("/usuarios/autenticar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                emailServer: email,
                senhaServer: senha
            })
        }).then(function (resposta) {

            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));
                    sessionStorage.EMAIL_USUARIO = json.email;
                    sessionStorage.NOME_USUARIO = json.nome;
                    sessionStorage.ID_USUARIO = json.id;

                    setTimeout(function () {
                        window.location = "./index.html";
                    }, 1000); // apenas para exibir o loading

                });

            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }

</script>